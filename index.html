<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞ üéÖ</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
    <div id="loginScreen" class="screen active">
        <div class="container">
            <div class="snowflakes">
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
            </div>
            <h1 class="title">üéÖ –¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞</h1>
            <div class="tree-decoration">üéÑ</div>
            <form id="loginForm" class="form">
                <input 
                    type="text" 
                    id="passwordInput" 
                    class="input" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                    autocomplete="off"
                    required
                >
                <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
            </form>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="userScreen" class="screen">
        <div class="container">
            <div class="snowflakes">
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
            </div>
            <h1 class="title">üéÖ –¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞</h1>
            <div class="user-info">
                <p class="welcome-text">–ü—Ä–∏–≤–µ—Ç, <span id="userName"></span>! üëã</p>
            </div>
            
            <!-- –°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã -->
            <div id="gameStatus" class="status-box">
                <p id="statusText"></p>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="actions">
                <button id="orderGiftBtn" class="btn btn-action">
                    üéÅ –ó–∞–∫–∞–∑–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫
                </button>
                <button id="viewGiftBtn" class="btn btn-action">
                    üéÖ –ö–æ–º—É –∏ —á—Ç–æ —è –¥–∞—Ä—é
                </button>
                <button id="rulesBtn" class="btn btn-action">
                    üìú –ü—Ä–∞–≤–∏–ª–∞
                </button>
                <button id="logoutBtn" class="btn btn-secondary">
                    –í—ã–π—Ç–∏
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∞–¥–º–∏–Ω–∞ -->
    <div id="adminScreen" class="screen">
        <div class="container">
            <div class="snowflakes">
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
                <div class="snowflake">‚ùÑ</div>
            </div>
            <h1 class="title">üõ†Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
            
            <!-- –°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã -->
            <div id="adminStatus" class="status-box">
                <p id="adminStatusText"></p>
            </div>

            <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ -->
            <div class="admin-section">
                <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</h2>
                <form id="addUserForm" class="form">
                    <input 
                        type="text" 
                        id="newUserName" 
                        class="input" 
                        placeholder="–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞"
                        required
                    >
                    <input 
                        type="text" 
                        id="newUserPassword" 
                        class="input" 
                        placeholder="–ü–∞—Ä–æ–ª—å (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)"
                    >
                    <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                </form>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
            <div class="admin-section">
                <h2>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏ (<span id="participantsCount">0</span>)</h2>
                <div id="participantsList" class="participants-list"></div>
            </div>

            <!-- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ -->
            <div class="admin-section">
                <h2>üé≤ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</h2>
                <button id="runDistributionBtn" class="btn btn-primary btn-large">
                    –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
                </button>
                <div id="distributionError" class="error-message"></div>
            </div>

            <button id="adminLogoutBtn" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫–∞–∑–∞ –ø–æ–¥–∞—Ä–∫–∞ -->
    <div id="giftModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>üéÅ –ó–∞–∫–∞–∑–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫</h2>
            <form id="giftForm" class="form">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∞:</label>
                <textarea 
                    id="giftText" 
                    class="textarea" 
                    placeholder="–û–ø–∏—à–∏—Ç–µ, –∫–∞–∫–æ–π –ø–æ–¥–∞—Ä–æ–∫ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–ª—É—á–∏—Ç—å..."
                    required
                    maxlength="500"
                ></textarea>
                <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–∞—Ä–æ–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                <input 
                    type="url" 
                    id="giftLink" 
                    class="input" 
                    placeholder="https://..."
                >
                <p class="hint">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="maxPrice"></span> ‚ÇΩ</p>
                <div id="giftFormError" class="error-message"></div>
                <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–¥–∞—Ä–∫–∞ -->
    <div id="viewGiftModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>üéÖ –ö–æ–º—É –∏ —á—Ç–æ —è –¥–∞—Ä—é</h2>
            <div id="giftInfo" class="gift-info">
                <p class="info-text">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∞–≤–∏–ª -->
    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>üìú –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h2>
            <div class="rules-content">
                <p>üéÑ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É "–¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞"!</p>
                <ul>
                    <li>–ö–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç –∏–º—è —Ç–æ–≥–æ, –∫–æ–º—É –Ω—É–∂–Ω–æ –ø–æ–¥–∞—Ä–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</li>
                    <li>–ù–∏–∫—Ç–æ –Ω–µ –¥–∞—Ä–∏—Ç –ø–æ–¥–∞—Ä–æ–∫ —Å–∞–º–æ–º—É —Å–µ–±–µ</li>
                    <li>–ó–∞–∫–∞–∂–∏—Ç–µ –ø–æ–¥–∞—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–ª—É—á–∏—Ç—å</li>
                    <li>–ü–æ—Å–ª–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–æ–º—É –¥–∞—Ä–∏—Ç—å –∏ —á—Ç–æ –∑–∞–∫–∞–∑–∞–ª–∏ –≤–∞–º</li>
                    <li>–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ø–æ–¥–∞—Ä–æ–∫ –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –¥–µ–¥–ª–∞–π–Ω–∞</li>
                    <li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–∞—Ä–∫–∞ —É–∫–∞–∑–∞–Ω–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ</li>
                </ul>
                <p>üéÅ –ü—Ä–∏—è—Ç–Ω–æ–π –∏–≥—Ä—ã –∏ —Å—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞!</p>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è -->
    <div id="warningModal" class="modal">
        <div class="modal-content">
            <h2>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ</h2>
            <div id="warningMessage" class="warning-message"></div>
            <button id="warningOkBtn" class="btn btn-primary">–ü–æ–Ω—è—Ç–Ω–æ</button>
        </div>
    </div>

    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <a href="https://t.me/svedushev" target="_blank" class="footer-link">
            from @svedushev with ‚ù§Ô∏è
        </a>
    </footer>

    <script src="app.js"></script>
</body>
</html>
